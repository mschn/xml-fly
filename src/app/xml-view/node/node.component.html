<div *ngIf="node.nodeName"
  [class.noTagName]="noTagName"
  [class.first-node]="!node.parentNode.parentNode"
  [class.text-node]="isTextNode()"
  (click)="onNodeClick($event, node)"
  class="node">

  <div class="header d-flex flex-row">
    <!-- expand / collapse button -->
    <ng-container *ngIf="!isTextNode()">
      <button class="btn btn-sm" 
        [hidden]="!collapsed"
        (click)="show($event)">
        <span class="icon-expand"></span>
      </button>
      <button class="btn btn-sm" 
        [hidden]="collapsed"
        (click)="hide($event)">
        <span class="icon-collapse"></span>
      </button>
    </ng-container>

    <!-- tag name -->
    <div *ngIf="!noTagName" class="p-1 tagname"
      [class.name]="isTextNode()">
      <span *ngIf="isTextNode()" class="type icon-tag">#</span>
      {{ node.nodeName }}
    </div>
    <div *ngIf="isTextNode()" class="value p-1"
        [class.border-left]="!noTagName">
      {{ getText(node) }}
    </div>
  </div>

  <!-- attributes -->
  <div class="pl-3 attr" 
      [hidden]="collapsed"
      *ngFor="let attr of node.attributes">
    <div class="node d-flex flex-row"
        (click)="onAttrClick($event, attr, node)">
      <div class="name p-1">
        <span class="icon-attr">@</span>
        {{ attr.name }}
      </div>        
      <div class="value p-1 border-left">
        {{ attr.value }}
      </div>
    </div>
  </div>

  <!-- children nodes -->
  <ng-container *ngFor="let childNodes of node.childNodesGroups">
    <!-- array -->
    <div class="pl-3"
         *ngIf="childNodes.length > 1"
         [hidden]="collapsed">
      <app-array [nodes]="childNodes"></app-array>
    </div>
    <!-- single node -->
    <div class="pl-3"
        *ngIf="childNodes.length === 1"
        [hidden]="collapsed">
      <app-node [node]="childNodes[0]" [arrayInParent]="arrayInParent"></app-node>
    </div>
  </ng-container>

</div>
