<div class="array">

  <div class="header">
    <!-- expand / collapse button -->
    <ng-container>
      <button class="btn btn-sm"
        [hidden]="!collapsed"
        (click)="show($event)">
        <span class="icon-expand"></span>
      </button>
      <button class="btn btn-sm"
        [hidden]="collapsed"
        (click)="hide($event)">
        <span class="icon-collapse"></span>
      </button>
    </ng-container>

    <span class="tagname p-1">
      <span class="tag">&lt;</span>{{ nodes[0].name }}<span class="tag">&gt;</span>
    </span>
    <span class="py-1 array-len">
      ({{ nodes.length }})
    </span>
  </div>

  <div class="ml-3">
    <table class="mr-1" [hidden]="collapsed">
        <thead *ngIf="!nodes[0].isText">
          <tr>
            <th class="p-1 array-index"></th>
            <th class="p-1 attr-name"
              *ngFor="let attr of nodes[0].attributeNames">
              {{ attr }}
            </th>
            <ng-container *ngFor="let childNode of nodes[0].childrenNames">
              <th class="p-1 tag-name" >
                <span class="tag">&lt;</span>{{ childNode }}<span class="tag">&gt;</span>
              </th>
            </ng-container>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let node of nodes; let i = index">
            <td class="p-1 array-index">
              {{ i }}.
            </td>
            <td class="p-1 tag-val" *ngIf="node.isText">
              {{ node.shortText }}
            </td>
            <ng-container *ngIf="!node.isText">
              <ng-container *ngFor="let attr of node.attributes">
                  <td class="attr-val"
                      [class.selected]="selected && selectedAttr === attr"
                  (click)="onAttrClick($event, attr, node)">
                  <div class="p1">
                    {{ attr.value }}
                  </div>
                 </td>
              </ng-container>
              <ng-container *ngFor="let childNode of getChildNodes(node)">
                <td class="" *ngIf="childNode">
                  <app-node [node]="childNode" [arrayInParent]="true" [noTagName]="true"></app-node>
                </td>
              </ng-container>
            </ng-container>
          </tr>
        </tbody>
      </table>
  </div>

</div>

