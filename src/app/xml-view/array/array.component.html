<div class="array">

  <div class="header">
    <!-- expand / collapse button -->
    <ng-container>
      <button class="btn btn-sm"
        [hidden]="!collapsed"
        (click)="show($event)">
        <span class="icon-expand"></span>
      </button>
      <button class="btn btn-sm"
        [hidden]="collapsed"
        (click)="hide($event)">
        <span class="icon-collapse"></span>
      </button>
    </ng-container>

    <span class="tagname p-1">
      {{ nodes[0].name }}
    </span>
    <span class="py-1">
      ({{ nodes.length }})
    </span>
  </div>

  <div class="ml-3">
    <table class="" [hidden]="collapsed">
        <thead *ngIf="!nodes[0].isText">
          <tr>
            <th class="p-1"></th>
            <th class="p-1"
              *ngFor="let attr of nodes[0].attributeNames">
              <span class="type icon-attr">@</span>
              {{ attr }}
            </th>
            <ng-container *ngFor="let childNode of nodes[0].childrenNames">
              <th class="p-1" >
                <span class="type icon-tag">#</span>
                {{ childNode }}
              </th>
            </ng-container>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let node of nodes; let i = index">
            <td class="p-1">
              {{ i }}
            </td>
            <td class="p-1 border-top" *ngIf="node.isText">
              {{ node.shortText }}
            </td>
            <ng-container *ngIf="!node.isText">
              <ng-container *ngFor="let attr of node.attributes">
                  <td class="p-1 border-top"
                  (click)="onAttrClick($event, attr, node)">
                   {{ attr.value }}
                 </td>
              </ng-container>
              <ng-container *ngFor="let childNode of getChildNodes(node)">
                <td *ngIf="!childNode" class="border-top">
                </td>
                <td class="" *ngIf="childNode">
                  <app-node [node]="childNode" [arrayInParent]="true" [noTagName]="true"></app-node>
                </td>
              </ng-container>
            </ng-container>
          </tr>
        </tbody>
      </table>
  </div>

</div>

